(()=>{"use strict";const e=window.React,t=window.wp.blocks,l=window.wp.element,a=window.wp.data,r=window.wp.components,n=window.wp.blockEditor,o=window.wp.i18n;(0,t.registerBlockType)("crafto/product-tag-widget",{title:(0,o.__)("Crafto Taxonomy Filter","crafto-addons"),category:"common",icon:"filter",attributes:{title:{type:"string",default:"Filter by Category"},selected_option:{type:"string",default:"product_cat"},selected_orderby:{type:"string",default:"name"},selected_order:{type:"string",default:"ASC"},numberof_posts:{type:"string",default:""},exclude:{type:"string",default:""},include:{type:"string",default:""}},edit:({attributes:t,setAttributes:o})=>{const{title:c,numberof_posts:i,selected_option:s,selected_orderby:u,selected_order:d,exclude:m,include:p}=t,b=(0,a.useSelect)((e=>{const t=i||-1,l=["name","slug","term_group","term_id","id","count","description"].includes(d)?d:"name",a=m?m.split(",").map((e=>parseInt(e.trim(),10))).filter(Number.isInteger):[],r=p?p.split(",").map((e=>parseInt(e.trim(),10))).filter(Number.isInteger):[],n={per_page:t,hide_empty:!0,orderby:l};0!==a.length&&(n.exclude=a.length>0?a:[]),0!==r.length&&(n.include=r.length>0?r:[]);var o=e("core").getEntityRecords("taxonomy",s,n);return o&&"DESC"===d?o=o.sort(((e,t)=>t[l]-e[l])):o&&"ASC"===d&&(o=o.sort(((e,t)=>e[l]-t[l]))),o}),[s,i,u,d,m,p]);return(0,e.createElement)(l.Fragment,null,(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(r.PanelBody,{title:"Block Settings",initialOpen:!0},(0,e.createElement)(r.TextControl,{label:"Title",value:c,onChange:e=>{o({title:e})}}),(0,e.createElement)(r.SelectControl,{label:"Select Taxonomy",value:s,options:[{label:"Product By Category",value:"product_cat"},{label:"Product By Tag",value:"product_tag"}],onChange:e=>{o({selected_option:e})}}),(0,e.createElement)(r.SelectControl,{label:"Order by",value:u,options:[{label:"Default",value:"term_id"},{label:"Term ID",value:"term_id"},{label:"Name",value:"name"},{label:"Count",value:"count"}],onChange:e=>{o({selected_orderby:e})}}),(0,e.createElement)(r.SelectControl,{label:"Order",value:d,options:[{label:"Default",value:"ASC"},{label:"ASC",value:"ASC"},{label:"DESC",value:"DESC"}],onChange:e=>{o({selected_order:e})}}),(0,e.createElement)(r.TextControl,{label:"Exclude",value:m,onChange:e=>{o({exclude:e})}}),(0,e.createElement)(r.TextControl,{label:"Include",value:p,onChange:e=>{o({include:e})}}),(0,e.createElement)(r.TextControl,{label:"Number",value:i,onChange:e=>{o({numberof_posts:e})}}))),(0,e.createElement)("div",{...(0,n.useBlockProps)()},(0,e.createElement)("div",{class:"components-placeholder__label"},(0,e.createElement)("span",{class:"block-editor-block-icon"},(0,e.createElement)(r.Icon,{icon:"filter"})),c),b&&b.length>0?(0,e.createElement)("ul",null,b.map((t=>(0,e.createElement)("li",{key:t.id},t.name)))):(0,e.createElement)("p",null,"No terms found.")))},save:()=>null}),(0,t.registerBlockType)("crafto/recent-product-slider",{title:(0,o.__)("Crafto Recent Product Slider","crafto-addons"),category:"common",icon:"filter",attributes:{title:{type:"string",default:"New arrivals"},number_of_products:{type:"string",default:""},orderby:{type:"string",default:"date"}},edit:({attributes:t,setAttributes:a})=>{const{title:o,number_of_products:c,orderby:i}=t;return(0,e.createElement)(l.Fragment,null,(0,e.createElement)("div",{...(0,n.useBlockProps)()},(0,e.createElement)("div",{class:"components-placeholder__label"},(0,e.createElement)("span",{class:"block-editor-block-icon"},(0,e.createElement)(r.Icon,{icon:"filter"})),t.title),(0,e.createElement)(r.TextControl,{label:"Title",value:o,onChange:e=>a({title:e})}),(0,e.createElement)(r.TextControl,{label:"Number of Products",value:c,onChange:e=>a({number_of_products:e})}),(0,e.createElement)(r.SelectControl,{label:"Order by",value:i,options:[{label:"Date",value:"date"},{label:"Title",value:"title"}],onChange:e=>a({orderby:e})})))},save:()=>null}),(0,t.registerBlockType)("crafto/product-attribute-filter",{title:(0,o.__)("Crafto Attribute Filter","crafto-addons"),category:"common",icon:"filter",attributes:{title:{type:"string",default:"Filter by Attribute"},selected_option:{type:"string",default:"pa_color"}},edit:({attributes:t,setAttributes:a})=>{const{title:n,selected_option:o}=t,[c,i]=(0,l.useState)([]);return(0,l.useEffect)((()=>{wp.apiFetch({path:"/crafto/v1/product-attributes"}).then((e=>{i(e)}))}),[]),(0,e.createElement)("div",null,(0,e.createElement)(r.TextControl,{label:"Title",value:n,onChange:e=>a({title:e})}),(0,e.createElement)(r.SelectControl,{label:"Attributes",value:o,options:[{label:"Select an attribute",value:""},...c.map((e=>({label:e.name,value:`pa_${e.slug}`})))],onChange:e=>a({selected_option:e})}))},save:()=>null}),(0,t.registerBlockType)("crafto/crafto-active-filter",{title:(0,o.__)("Crafto Active Filter","crafto-addons"),category:"common",icon:"filter",attributes:{title:{type:"string",default:"Active Filter"}},edit:({attributes:t,setAttributes:a})=>{const{title:n}=t;return(0,e.createElement)(l.Fragment,null,(0,e.createElement)("div",{class:"components-placeholder__label"},(0,e.createElement)("span",{class:"block-editor-block-icon"},(0,e.createElement)(r.Icon,{icon:"filter"})),t.title),(0,e.createElement)(r.TextControl,{label:"Title",value:n,onChange:e=>a({title:e})}))},save:()=>null}),(0,t.registerBlockType)("crafto/crafto-price-filter",{title:(0,o.__)("Crafto Price Filter","crafto-addons"),category:"common",icon:"filter",attributes:{title:{type:"string",default:"Filter by price"},minPrice:{type:"number",default:0},maxPrice:{type:"number",default:craftoPriceFilterData.maxPrice||200}},edit:({attributes:t,setAttributes:a})=>{const{title:n,minPrice:c,maxPrice:i}=t,[s,u]=(0,l.useState)([c,i]);return(0,e.createElement)(l.Fragment,null,(0,e.createElement)("div",{className:"crafto-price-filter price-range-slider"},(0,e.createElement)("div",{className:"components-placeholder__label"},(0,e.createElement)("span",{className:"block-editor-block-icon"},(0,e.createElement)("i",{className:"dashicons dashicons-filter"})),n),(0,e.createElement)(r.TextControl,{label:(0,o.__)("Title","crafto-addons"),value:n,onChange:e=>a({title:e})}),(0,e.createElement)("div",{className:"price-range-wrap"},(0,e.createElement)("div",null),(0,e.createElement)("span",{className:"min"}),(0,e.createElement)("span",{className:"max"})),(0,e.createElement)("label",{className:"price-range-label"},(0,e.createElement)("span",null,"$",s[0]),(0,e.createElement)("span",{className:"separator"}),(0,e.createElement)("span",null,"$",s[1]))))},save:()=>null})})();